!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("alpheios-data-models"));else if("function"==typeof define&&define.amd)define(["alpheios-data-models"],t);else{var r="object"==typeof exports?t(require("alpheios-data-models")):t(e["alpheios-data-models"]);for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}(window,function(e){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=45)}([function(t,r){t.exports=e},function(e,t,r){"use strict";var o=r(12),n=r(27),s=Object.prototype.toString;function i(e){return"[object Array]"===s.call(e)}function a(e){return null!==e&&"object"==typeof e}function l(e){return"[object Function]"===s.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:n,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:l,isStream:function(e){return a(e)&&l(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function r(r,o){"object"==typeof t[o]&&"object"==typeof r?t[o]=e(t[o],r):t[o]=r}for(var o=0,n=arguments.length;o<n;o++)c(arguments[o],r);return t},extend:function(e,t,r){return c(t,function(t,n){e[n]=r&&"function"==typeof t?o(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){e.exports=r(26)},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{viewBox:"0 0 447.6 757.4"}},[t("path",{attrs:{d:"M-128.4 305.8c74.8 53.3 146.8 110.5 215.7 171.3 0 0 348.4-399.4 557.1-477.1l27 53S277.2 418 150.5 757.4l-374.3-378.7 95.4-72.9z"}})])},toString:function(){return"C:\\_Alpheios\\wordlist\\src\\icons\\check.svg"}}},function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{viewBox:"0 0 900.5 900.5"}},[t("path",{attrs:{d:"M176.42 880.5c0 11.046 8.954 20 20 20h507.67c11.046 0 20-8.954 20-20V232.49H176.42V880.5zm386.33-537.73h75V778.8h-75V342.77zm-150 0h75V778.8h-75V342.77zm-150 0h75V778.8h-75V342.77zM618.82 91.911V20c0-11.046-8.954-20-20-20H301.67c-11.046 0-20 8.954-20 20v96.911h-139.8c-11.046 0-20 8.954-20 20v50.576c0 11.045 8.954 20 20 20h616.75c11.046 0 20-8.955 20-20v-50.576c0-11.046-8.954-20-20-20h-139.8V91.912zm-75 20.889H356.67V75.001h187.15v37.801z"}})])},toString:function(){return"C:\\_Alpheios\\wordlist\\src\\icons\\delete.svg"}}},function(e,t,r){"use strict";(function(t){var o=r(1),n=r(30),s={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,l={adapter:("undefined"!=typeof XMLHttpRequest?a=r(13):void 0!==t&&(a=r(13)),a),transformRequest:[function(e,t){return n(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){l.headers[e]={}}),o.forEach(["post","put","patch"],function(e){l.headers[e]=o.merge(s)}),e.exports=l}).call(this,r(29))},function(e,t,r){},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(t,r)}}},function(e,t,r){"use strict";var o=r(1),n=r(31),s=r(33),i=r(34),a=r(35),l=r(14),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(36);e.exports=function(e){return new Promise(function(t,d){var u=e.data,h=e.headers;o.isFormData(u)&&delete h["Content-Type"];var m=new XMLHttpRequest,p="onreadystatechange",f=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in m||a(e.url)||(m=new window.XDomainRequest,p="onload",f=!0,m.onprogress=function(){},m.ontimeout=function(){}),e.auth){var g=e.auth.username||"",_=e.auth.password||"";h.Authorization="Basic "+c(g+":"+_)}if(m.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),m.timeout=e.timeout,m[p]=function(){if(m&&(4===m.readyState||f)&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in m?i(m.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?m.response:m.responseText,status:1223===m.status?204:m.status,statusText:1223===m.status?"No Content":m.statusText,headers:r,config:e,request:m};n(t,d,o),m=null}},m.onerror=function(){d(l("Network Error",e,null,m)),m=null},m.ontimeout=function(){d(l("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",m)),m=null},o.isStandardBrowserEnv()){var w=r(37),v=(e.withCredentials||a(e.url))&&e.xsrfCookieName?w.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}if("setRequestHeader"in m&&o.forEach(h,function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete h[t]:m.setRequestHeader(t,e)}),e.withCredentials&&(m.withCredentials=!0),e.responseType)try{m.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&m.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&m.upload&&m.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){m&&(m.abort(),d(e),m=null)}),void 0===u&&(u=null),m.send(u)})}},function(e,t,r){"use strict";var o=r(32);e.exports=function(e,t,r,n,s){var i=new Error(e);return o(i,t,r,n,s)}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";function o(e){this.message=e}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,e.exports=o},function(e){e.exports={TOOLTIP_ALL_IMPORTANT:{message:"Make all important ",description:"Make all words inside language block important",component:"WordLanguagePanel"},TOOLTIP_NO_IMPORTANT:{message:"Remove all important ",description:"Remove important mark from all words inside language block",component:"WordLanguagePanel"},TOOLTIP_REMOVE_ALL:{message:"Remove all word items",description:"Remove all words inside language block",component:"WordLanguagePanel"},TOOLTIP_CHANGE_IMPORTANT:{message:"Change important status",description:"Change important status for the WordItem",component:"WordItemPanel"},TOOLTIP_REMOVE:{message:"Remove worditem",description:"Remove the WordItem form the list",component:"WordItemPanel"},TOOLTIP_TEXT_CONTEXT:{message:"Show contexts",description:"Show panle with contexts for the wordItem",component:"WordItemPanel"},TOOLTIP_BACK:{message:"Back to WordList",description:"Back to the WordList Tab",component:"WordContextPanel"}}},function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{viewBox:"0 0 442 442"}},[t("path",{attrs:{d:"M171 336H70c-5.523 0-10 4.477-10 10s4.477 10 10 10h101c5.523 0 10-4.477 10-10s-4.477-10-10-10zM322 336H221c-5.523 0-10 4.477-10 10s4.477 10 10 10h101c5.522 0 10-4.477 10-10s-4.478-10-10-10zM322 86H70c-5.523 0-10 4.477-10 10s4.477 10 10 10h252c5.522 0 10-4.477 10-10s-4.478-10-10-10zM322 136H221c-5.523 0-10 4.477-10 10s4.477 10 10 10h101c5.522 0 10-4.477 10-10s-4.478-10-10-10zM322 186H221c-5.523 0-10 4.477-10 10s4.477 10 10 10h101c5.522 0 10-4.477 10-10s-4.478-10-10-10zM322 236H221c-5.523 0-10 4.477-10 10s4.477 10 10 10h101c5.522 0 10-4.477 10-10s-4.478-10-10-10zM322 286H221c-5.523 0-10 4.477-10 10s4.477 10 10 10h101c5.522 0 10-4.477 10-10s-4.478-10-10-10zM171 286H70c-5.523 0-10 4.477-10 10s4.477 10 10 10h101c5.523 0 10-4.477 10-10s-4.477-10-10-10zM171 136H70c-5.523 0-10 4.477-10 10v101c0 5.523 4.477 10 10 10h101c5.523 0 10-4.477 10-10V146c0-5.523-4.477-10-10-10zm-10 101H80v-81h81v81z"}}),t("path",{attrs:{d:"M422 76h-30V46c0-11.028-8.972-20-20-20H20C8.972 26 0 34.972 0 46v320c0 27.57 22.43 50 50 50h342c27.57 0 50-22.43 50-50V96c0-11.028-8.972-20-20-20zm0 290c0 16.542-13.458 30-30 30H50c-16.542 0-30-13.458-30-30V46h352v305c0 13.785 11.215 25 25 25 5.522 0 10-4.477 10-10s-4.478-10-10-10c-2.757 0-5-2.243-5-5V96h30v270z"}})])},toString:function(){return"C:\\_Alpheios\\wordlist\\src\\icons\\text-quote.svg"}}},function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{viewBox:"0 0 459 459"}},[t("path",{attrs:{d:"M178.5 140.25v-102L0 216.75l178.5 178.5V290.7c127.5 0 216.75 40.8 280.5 130.05-25.5-127.5-102-255-280.5-280.5z"}})])},toString:function(){return"C:\\_Alpheios\\wordlist\\src\\icons\\back.svg"}}},function(e){e.exports={baseUrl:"https://w2tfh159s2.execute-api.us-east-2.amazonaws.com/prod",testUserID:"alpheiosMockUser"}},function(e,t,r){"use strict";var o=r(3);r.n(o).a},function(e,t,r){"use strict";var o=r(4);r.n(o).a},function(e,t,r){"use strict";var o=r(5);r.n(o).a},function(e,t,r){"use strict";var o=r(6);r.n(o).a},function(e,t,r){"use strict";var o=r(7);r.n(o).a},function(e,t,r){"use strict";var o=r(1),n=r(12),s=r(28),i=r(10);function a(e){var t=new s(e),r=n(s.prototype.request,t);return o.extend(r,s.prototype,t),o.extend(r,t),r}var l=a(i);l.Axios=s,l.create=function(e){return a(o.merge(i,e))},l.Cancel=r(16),l.CancelToken=r(43),l.isCancel=r(15),l.all=function(e){return Promise.all(e)},l.spread=r(44),e.exports=l,e.exports.default=l},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";var o=r(10),n=r(1),s=r(38),i=r(39);function a(e){this.defaults=e,this.interceptors={request:new s,response:new s}}a.prototype.request=function(e){"string"==typeof e&&(e=n.merge({url:arguments[0]},arguments[1])),(e=n.merge(o,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[i,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},n.forEach(["delete","get","head","options"],function(e){a.prototype[e]=function(t,r){return this.request(n.merge(r||{},{method:e,url:t}))}}),n.forEach(["post","put","patch"],function(e){a.prototype[e]=function(t,r,o){return this.request(n.merge(o||{},{method:e,url:t,data:r}))}}),e.exports=a},function(e,t){var r,o,n=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(e){o=i}}();var l,c=[],d=!1,u=-1;function h(){d&&l&&(d=!1,l.length?c=l.concat(c):u=-1,c.length&&m())}function m(){if(!d){var e=a(h);d=!0;for(var t=c.length;t;){for(l=c,c=[];++u<t;)l&&l[u].run();u=-1,t=c.length}l=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===i||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||d||a(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,r){"use strict";var o=r(1);e.exports=function(e,t){o.forEach(e,function(r,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[o])})}},function(e,t,r){"use strict";var o=r(14);e.exports=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(o("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r,o,n){return e.config=t,r&&(e.code=r),e.request=o,e.response=n,e}},function(e,t,r){"use strict";var o=r(1);function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(o.isURLSearchParams(t))s=t.toString();else{var i=[];o.forEach(t,function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),i.push(n(t)+"="+n(e))}))}),s=i.join("&")}return s&&(e+=(-1===e.indexOf("?")?"?":"&")+s),e}},function(e,t,r){"use strict";var o=r(1),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,i={};return e?(o.forEach(e.split("\n"),function(e){if(s=e.indexOf(":"),t=o.trim(e.substr(0,s)).toLowerCase(),r=o.trim(e.substr(s+1)),t){if(i[t]&&n.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}}),i):i}},function(e,t,r){"use strict";var o=r(1);e.exports=o.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var o=e;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=o.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(){this.message="String contains an invalid character"}n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,r,s=String(e),i="",a=0,l=o;s.charAt(0|a)||(l="=",a%1);i+=l.charAt(63&t>>8-a%1*8)){if((r=s.charCodeAt(a+=.75))>255)throw new n;t=t<<8|r}return i}},function(e,t,r){"use strict";var o=r(1);e.exports=o.isStandardBrowserEnv()?{write:function(e,t,r,n,s,i){var a=[];a.push(e+"="+encodeURIComponent(t)),o.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),o.isString(n)&&a.push("path="+n),o.isString(s)&&a.push("domain="+s),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var o=r(1);function n(){this.handlers=[]}n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=n},function(e,t,r){"use strict";var o=r(1),n=r(40),s=r(15),i=r(10),a=r(41),l=r(42);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!a(e.url)&&(e.url=l(e.baseURL,e.url)),e.headers=e.headers||{},e.data=n(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||i.adapter)(e).then(function(t){return c(e),t.data=n(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=n(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var o=r(1);e.exports=function(e,t,r){return o.forEach(r,function(r){e=r(e,t)}),e}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var o=r(16);function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new o(e),t(r.reason))})}n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n(function(t){e=t}),cancel:e}},e.exports=n},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";r.r(t);var o=r(11),n=r.n(o),s=r(0);class wordlist_controller_WordlistController{constructor(e,t){this.wordLists={},this.availableLangs=e,t.TEXT_QUOTE_SELECTOR_RECEIVED.sub(this.onTextQuoteSelectorReceived.bind(this)),t.HOMONYM_READY.sub(this.onHomonymReady.bind(this)),t.DEFS_READY.sub(this.onDefinitionsReady.bind(this)),t.LEMMA_TRANSL_READY.sub(this.onLemmaTranslationsReady.bind(this))}async initLists(e){for(let t of this.availableLangs){let r=await e.query({dataType:"WordItem",params:{languageCode:t}});r.length>0&&(this.wordLists[t]=new s.WordList(t,r),wordlist_controller_WordlistController.evt.WORDLIST_UPDATED.pub(this.wordLists))}}getWordList(e,t=!0){if(t&&!this._wordListExist(e)){let t=new s.WordList(e,[]);this.wordLists[e]=t,wordlist_controller_WordlistController.evt.WORDLIST_CREATED.pub(t)}return this.wordLists[e]}removeWordList(e){this.wordLists[e];delete this.wordLists[e],wordlist_controller_WordlistController.evt.WORDLIST_DELETED.pub({dataType:"WordItem",params:{languageCode:e}}),wordlist_controller_WordlistController.evt.WORDLIST_UPDATED.pub(this.wordLists)}removeWordListItem(e,t){let r=this.getWordList(e,!1);if(r){let e=r.deleteWordItem(t);e&&wordlist_controller_WordlistController.evt.WORDITEM_DELETED.pub({dataObj:e})}}getWordListItem(e,t,r=!1){let o,n=this.getWordList(e,r);return n&&(o=n.getWordItem(t,r,wordlist_controller_WordlistController.evt.WORDITEM_UPDATED)),o}onHomonymReady(e){let t=this.getWordListItem(e.language,e.targetWord,!0);t.homonym=e,wordlist_controller_WordlistController.evt.WORDITEM_UPDATED.pub({dataObj:t,params:{segment:"shortHomonym"}}),wordlist_controller_WordlistController.evt.WORDLIST_UPDATED.pub(this.wordLists)}onDefinitionsReady(e){let t=this.getWordListItem(e.homonym.language,e.homonym.targetWord);t?(t.homonym=e.homonym,wordlist_controller_WordlistController.evt.WORDITEM_UPDATED.pub({dataObj:t,params:{segment:"fullHomonym"}})):console.error("Something went wrong: request to add definitions to non-existent item")}onLemmaTranslationsReady(e){let t=this.getWordListItem(e.language,e.targetWord);t?(t.homonym=e,wordlist_controller_WordlistController.evt.WORDITEM_UPDATED.pub({dataObj:t,params:{segment:"fullHomonym"}})):console.error("Something went wrong: request to add translations to non-existent item")}onTextQuoteSelectorReceived(e){let t=this.getWordListItem(e.languageCode,e.normalizedText,!0);t?(t.addContext([e]),wordlist_controller_WordlistController.evt.WORDITEM_UPDATED.pub({dataObj:t,params:{segment:"context"}}),wordlist_controller_WordlistController.evt.WORDLIST_UPDATED.pub(this.getWordList(t.languageCode))):console.error("Unable to create or retrieve worditem")}updateWordItemImportant(e,t,r){let o=this.getWordListItem(e,t,!1);o?(o.important=r,wordlist_controller_WordlistController.evt.WORDITEM_UPDATED.pub({dataObj:o,params:{segment:"common"}})):console.error("Something went wrong: request to set important flag on non-existent item")}updateAllImportant(e,t){this.getWordList(e,!1).values.forEach(e=>{e.important=t,wordlist_controller_WordlistController.evt.WORDITEM_UPDATED.pub({dataObj:e,params:{segment:"common"}})})}selectWordItem(e,t){let r=this.getWordListItem(e,t,!1);wordlist_controller_WordlistController.evt.WORDITEM_SELECTED.pub(r.homonym)}_wordListExist(e){return Object.keys(this.wordLists).includes(e)}}wordlist_controller_WordlistController.evt={WORDLIST_UPDATED:new s.PsEvent("Wordlist updated",wordlist_controller_WordlistController),WORDLIST_CREATED:new s.PsEvent("Wordlist created",wordlist_controller_WordlistController),WORDLIST_DELETED:new s.PsEvent("Wordlist deleted",wordlist_controller_WordlistController),WORDITEM_SELECTED:new s.PsEvent("WordItem selected",wordlist_controller_WordlistController),WORDITEM_UPDATED:new s.PsEvent("WordItem updated",wordlist_controller_WordlistController),WORDITEM_DELETED:new s.PsEvent("WordItem deleted",wordlist_controller_WordlistController)};var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.showContext?e._e():r("div",{staticClass:"alpheios-wordlist"},e._l(e.languagesList,function(t,o){return r("div",{key:o,staticClass:"alpheios-wordlist-language"},[r("word-language",{attrs:{controller:e.wordlistC,languageCode:t,updated:e.updated},on:{showContexts:e.showContexts}})],1)}),0),e._v(" "),e.showContext?r("div",{staticClass:"alpheios-wordlist-contexts"},[r("word-context",{attrs:{worditem:e.showContextWordItem},on:{backToWordList:e.backToWordList}})],1):e._e()])};i._withStripped=!0;var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"alpheios-wordlist-commands"},[r("div",{staticClass:"alpheios-wordlist-language__title"},[e._v(e._s(e.languageName))]),e._v(" "),r("alph-tooltip",{attrs:{tooltipDirection:"top-left",tooltipText:e.l10n.getMsg("TOOLTIP_ALL_IMPORTANT")}},[r("div",{staticClass:"alpheios-wordlist-commands__item alpheios-wordlist-commands__item-all-important",on:{click:function(t){return e.makeAllImportant()}}},[r("check-icon")],1)]),e._v(" "),r("alph-tooltip",{attrs:{tooltipDirection:"top-left",tooltipText:e.l10n.getMsg("TOOLTIP_NO_IMPORTANT")}},[r("div",{staticClass:"alpheios-wordlist-commands__item alpheios-wordlist-commands__item-no-important",on:{click:function(t){return e.removeAllImportant()}}},[r("check-icon")],1)]),e._v(" "),r("alph-tooltip",{attrs:{tooltipDirection:"top-left",tooltipText:e.l10n.getMsg("TOOLTIP_REMOVE_ALL")}},[r("div",{staticClass:"alpheios-wordlist-commands__item alpheios-wordlist-commands__item-remove-all",on:{click:function(t){return e.deleteAll()}}},[r("delete-icon")],1)])],1),e._v(" "),e._l(e.wordItems,function(t){return r("div",{key:t.targetWord},[r("word-item",{attrs:{controller:e.controller,worditem:t,updated:e.updated},on:{changeImportant:e.changeImportant,deleteItem:e.deleteItem,showContexts:e.showContexts}})],1)})],2)};a._withStripped=!0;var l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alpheios-tooltip",style:e.additionalStyles},[e._t("default"),e._v(" "),e.tooltipText?r("span",{staticClass:"alpheios-tooltip__text",class:e.finalTooltipDirection},[e._v("\n    "+e._s(e.tooltipText)+"\n  ")]):e._e()],2)};function c(e,t,r,o,n,s,i,a){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=r,c._compiled=!0),o&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),i?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=l):n&&(l=a?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}l._withStripped=!0;var d=c({name:"TooltipWrap",data:()=>({allowedTooltipClasses:["alpheios-tooltip__top","alpheios-tooltip__top-right","alpheios-tooltip__top-left","alpheios-tooltip__bottom","alpheios-tooltip__bottom-right","alpheios-tooltip__bottom-wide","alpheios-tooltip__bottom-narrow","alpheios-tooltip__bottom-narrow2","alpheios-tooltip__left","alpheios-tooltip__right"],defaultTooltipClass:"alpheios-tooltip__bottom"}),props:{tooltipText:{type:String,required:!0},tooltipDirection:{type:String,required:!1},additionalStyles:{type:Object,required:!1}},computed:{tooltipDirectionLC:function(){return this.tooltipDirection?this.tooltipDirection.toLowerCase():""},tooltipDirectionClass:function(){return"alpheios-tooltip__"+this.tooltipDirectionLC},finalTooltipDirection:function(){return this.allowedTooltipClasses.indexOf(this.tooltipDirectionClass)>-1?this.tooltipDirectionClass:this.defaultTooltipClass}}},l,[],!1,null,null,null);d.options.__file="vue-components/common-components/tooltip-wrap.vue";var u=d.exports,h=r(8),m=r.n(h),p=r(9),f=r.n(p),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alpheios-wordlist-language__worditem",class:e.itemClasses},[r("alph-tooltip",{attrs:{tooltipDirection:"top-left",tooltipText:e.l10n.getMsg("TOOLTIP_CHANGE_IMPORTANT")}},[r("div",{staticClass:"alpheios-worditem__data alpheios-worditem__icon",on:{click:function(t){return e.changeImportant()}}},[r("check-icon")],1)]),e._v(" "),r("alph-tooltip",{attrs:{tooltipDirection:"top-left",tooltipText:e.l10n.getMsg("TOOLTIP_REMOVE")}},[r("div",{staticClass:"alpheios-worditem__data alpheios-worditem__icon alpheios-worditem__delete_icon",on:{click:function(t){return e.deleteItem()}}},[r("delete-icon")],1)]),e._v(" "),r("alph-tooltip",{class:{"alpheios_no_tq ":!e.worditem.hasTextQuoteSelectors},attrs:{tooltipDirection:"top-left",tooltipText:e.l10n.getMsg("TOOLTIP_TEXT_CONTEXT")}},[r("div",{staticClass:"alpheios-worditem__data alpheios-worditem__icon alpheios-worditem__delete_icon",on:{click:function(t){return e.showContexts()}}},[r("text-quote-icon")],1)]),e._v(" "),r("div",{staticClass:"alpheios-worditem__data alpheios-worditem__targetWord",on:{click:function(t){return e.selectWordItem()}}},[e._v(e._s(e.worditem.targetWord))]),e._v(" "),r("div",{staticClass:"alpheios-worditem__data alpheios-worditem__lemmasList"},[e._v(e._s(e.lemmasList))])],1)};g._withStripped=!0;var _=r(18),w=r.n(_),v={name:"WordItemBlock",inject:["l10n"],components:{checkIcon:m.a,deleteIcon:f.a,textQuoteIcon:w.a,alphTooltip:u},props:{controller:{type:Object,required:!0},worditem:{type:Object,required:!0},updated:{type:Number,required:!0}},data:()=>({important:!1}),mounted(){this.important=this.worditem.important,this.$parent.$on("eventChangeImportant",this.eventChangeImportant)},computed:{itemClasses(){return{"alpheios-wordlist-language__worditem__active":this.important,"alpheios-wordlist-language__worditem__current_session":this.worditem.currentSession}},lemmasList(){return this.updated?this.worditem.lemmasList:""}},methods:{changeImportant(){this.$emit("changeImportant",this.worditem.targetWord,!this.worditem.important),this.important=this.worditem.important},eventChangeImportant(){this.important=this.worditem.important},selectWordItem(){this.controller.selectWordItem(this.worditem.languageCode,this.worditem.targetWord)},deleteItem(){this.$emit("deleteItem",this.worditem.targetWord)},showContexts(){this.$emit("showContexts",this.worditem.targetWord)}}},y=(r(21),c(v,g,[],!1,null,null,null));y.options.__file="vue-components/word-item-panel.vue";var b=y.exports,D={name:"WordLanguagePanel",components:{checkIcon:m.a,deleteIcon:f.a,wordItem:b,alphTooltip:u},inject:["l10n"],props:{controller:{type:Object,required:!0},languageCode:{type:String,required:!0},updated:{type:Number,required:!0}},data:()=>({reloadList:1}),computed:{wordlist(){return this.controller.getWordList(this.languageCode)},wordItems(){return this.updated&&this.reloadList?this.wordlist.values:[]},languageName(){return this.languageCode}},methods:{async makeAllImportant(){await this.controller.updateAllImportant(this.languageCode,!0),this.$emit("eventChangeImportant")},async removeAllImportant(){await this.controller.updateAllImportant(this.languageCode,!1),this.$emit("eventChangeImportant")},async changeImportant(e,t){await this.controller.updateWordItemImportant(this.languageCode,e,t)},async deleteItem(e){await this.controller.removeWordListItem(this.languageCode,e),this.reloadList=this.reloadList+1},async deleteAll(){await this.controller.removeWordList(this.languageCode),this.reloadList=this.reloadList+1},showContexts(e){this.$emit("showContexts",e,this.languageCode)}}},I=(r(22),c(D,a,[],!1,null,null,null));I.options.__file="vue-components/word-language-panel.vue";var C=I.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"alpheios-wordlist-commands"},[r("alph-tooltip",{attrs:{tooltipDirection:"top-left",tooltipText:e.l10n.getMsg("TOOLTIP_BACK")}},[r("div",{staticClass:"alpheios-wordlist-commands__item alpheios-wordlist-commands__item-back",on:{click:e.backToWordList}},[r("back-icon")],1)]),e._v(" "),r("div",{staticClass:"alpheios-wordlist-language__title"},[e._v(e._s(e.worditem.targetWord)+" ("+e._s(e.worditem.languageCode)+")")])],1),e._v(" "),e._l(e.sourcesList,function(t){return r("div",{staticClass:"alpheios-wordlists-tqs"},[r("word-tq-source",{attrs:{source:t,tqSelectors:e.formattedContext[t]}})],1)})],2)};x._withStripped=!0;var T=r(19),S=r.n(T),L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"alpheios-wordlists-tq"},[r("a",{staticClass:"alpheios-wordlists-tq-title",attrs:{href:e.source}},[e._v(e._s(e.source))]),e._v(" "),e._l(e.tqSelectors,function(t){return r("div",{key:t.ID,staticClass:"alpheios-wordlists-tq-contextHTML-block"},[r("p",{staticClass:"alpheios-wordlists-tq-contextHTML",domProps:{innerHTML:e._s(t.contextHTML)}})])})],2)};L._withStripped=!0;var E={name:"WordTQSourceBlock",props:{source:{type:String,required:!0},tqSelectors:{type:Array,required:!0}},computed:{},methods:{}},W=(r(23),c(E,L,[],!1,null,null,null));W.options.__file="vue-components/word-tq-source-block.vue";var R=W.exports,O={name:"WordContextBlock",components:{backIcon:S.a,alphTooltip:u,wordTqSource:R},inject:["l10n"],props:{worditem:{type:Object,required:!0}},computed:{formattedContext(){return this.worditem.formattedContext},sourcesList(){return Object.keys(this.formattedContext)}},methods:{backToWordList(){this.$emit("backToWordList")}}},k=(r(24),c(O,x,[],!1,null,null,null));k.options.__file="vue-components/word-context-panel.vue";var A={name:"WordListPanel",components:{wordLanguage:C,wordContext:k.exports},props:{wordlistC:{type:Object,required:!0},updated:{type:Number,required:!0}},data:()=>({showContextWordItem:null}),computed:{languagesList(){return this.showContextWordItem=null,this.updated&&Object.keys(this.wordLists).length>0?Object.keys(this.wordLists):[]},wordLists(){return this.updated?this.wordlistC.wordLists:[]},showContext(){return Boolean(this.showContextWordItem)}},methods:{showContexts(e,t){this.showContextWordItem=this.wordLists[t].getWordItem(e)},backToWordList(){this.showContextWordItem=null}}},M=(r(25),c(A,i,[],!1,null,null,null));M.options.__file="vue-components/word-list-panel.vue";var j=M.exports;class worditem_indexeddb_driver_WordItemIndexedDbDriver{constructor(e){this.userId=e,this.storageMap={common:{objectStoreName:"WordListsCommon",serialize:this._serializeCommon.bind(this),delete:this._segmentDeleteQueryByID.bind(this)},context:{objectStoreName:"WordListsContext",serialize:this._serializeContext.bind(this),load:this._loadContext,delete:this._segmentDeleteQueryByWordItemID.bind(this)},shortHomonym:{objectStoreName:"WordListsHomonym",serialize:this._serializeHomonym.bind(this),load:this._loadHomonym,delete:this._segmentDeleteQueryByID.bind(this)},fullHomonym:{objectStoreName:"WordListsFullHomonym",serialize:this._serializeHomonymWithFullDefs.bind(this),load:this._loadHomonym,delete:this._segmentDeleteQueryByID.bind(this)}}}get dbName(){return"AlpheiosWordLists"}get dbVersion(){return 3}get segments(){return Object.keys(this.storageMap)}get objectStores(){return Object.keys(this.storageMap).map(e=>this.storageMap[e].objectStoreName)}get WordListsCommon(){return this._objectStoreTemplate()}get WordListsContext(){let e=this._objectStoreTemplate();return e.indexes.push({indexName:"wordItemID",keyPath:"wordItemID",unique:!1}),e}get WordListsHomonym(){return this._objectStoreTemplate()}get WordListsFullHomonym(){return this._objectStoreTemplate()}load(e){return e.currentSession=!1,new s.WordItem(e)}loadSegment(e,t,r){this.storageMap[e].load&&this.storageMap[e].load(t,r)}segmentQuery(e,t){let r=this._makeStorageID(t),o="context"===e?"wordItemID":"ID";return{objectStoreName:this.storageMap[e].objectStoreName,condition:{indexName:o,value:r,type:"only"}}}segmentDeleteQuery(e,t){return this.storageMap[e].delete(e,t)}_segmentDeleteQueryByID(e,t){let r=this._makeStorageID(t);return{objectStoreName:this.storageMap[e].objectStoreName,condition:{indexName:"ID",value:r,type:"only"}}}_segmentDeleteQueryByWordItemID(e,t){let r=this._makeStorageID(t);return{objectStoreName:this.storageMap[e].objectStoreName,condition:{indexName:"wordItemID",value:r,type:"only"}}}segmentDeleteManyQuery(e,t){if(t.languageCode){let r=this.userId+"-"+t.languageCode;return{objectStoreName:this.storageMap[e].objectStoreName,condition:{indexName:"listID",value:r,type:"only"}}}throw new Error("Invalid query parameters - missing languageCode")}updateSegmentQuery(e,t){let r=[],o=this.storageMap[e].serialize(t);return Array.isArray(o)?r=r.concat(o):r.push(o),{objectStoreName:this.storageMap[e].objectStoreName,dataItems:r}}listQuery(e){if(e.languageCode){let t=this.userId+"-"+e.languageCode;return{objectStoreName:this.storageMap.common.objectStoreName,condition:{indexName:"listID",value:t,type:"only"}}}if(e.wordItem){let t=this.userId+"-"+e.wordItem.languageCode+"-"+e.wordItem.targetWord;return{objectStoreName:this.storageMap.common.objectStoreName,condition:{indexName:"ID",value:t,type:"only"}}}throw new Error("Invalid query parameters - missing languageCode")}_loadHomonym(e,t){let r=t[0].homonym;if(r.lexemes&&Array.isArray(r.lexemes)&&r.lexemes.length>0)e.homonym=s.WordItem.readHomonym(t[0]);else{let o=s.LanguageModelFactory.getLanguageIdFromCode(t[0].languageCode),n=r.lemmasList.split(", "),i=[];for(let e of n)i.push(new s.Lexeme(new s.Lemma(e,o),[]));e.homonym=new s.Homonym(i,r.targetWord)}}_loadContext(e,t){Array.isArray(t)||(t=[t]),e.context=s.WordItem.readContext(t)}_serializeCommon(e){return{ID:this._makeStorageID(e),listID:this.userId+"-"+e.languageCode,userID:this.userId,languageCode:e.languageCode,targetWord:e.targetWord,important:e.important,createdDT:worditem_indexeddb_driver_WordItemIndexedDbDriver.currentDate}}_serializeContext(e){let t=[],r=0,o=this._makeStorageID(e);for(let n of e.context){let s={ID:o+"-"+ ++r,listID:this.userId+"-"+e.languageCode,userID:this.userId,languageCode:e.languageCode,targetWord:e.targetWord,wordItemID:o,target:{source:n.source,selector:{type:"TextQuoteSelector",exact:n.text,prefix:n.prefix,suffix:n.suffix,contextHTML:n.contextHTML,languageCode:n.languageCode}},createdDT:worditem_indexeddb_driver_WordItemIndexedDbDriver.currentDate};t.push(s)}return t}_serializeHomonym(e,t=!1){let r=e.homonym&&e.homonym instanceof s.Homonym?e.homonym.convertToJSONObject(t):{};return{ID:this._makeStorageID(e),listID:this.userId+"-"+e.languageCode,userID:this.userId,languageCode:e.languageCode,targetWord:e.targetWord,homonym:r}}_serializeHomonymWithFullDefs(e){return this._serializeHomonym(e,!0)}_makeStorageID(e){return this.userId+"-"+e.languageCode+"-"+e.targetWord}_objectStoreTemplate(){return{keyPath:"ID",indexes:[{indexName:"ID",keyPath:"ID",unique:!0},{indexName:"listID",keyPath:"listID",unique:!1},{indexName:"userID",keyPath:"userID",unique:!1},{indexName:"languageCode",keyPath:"languageCode",unique:!1},{indexName:"targetWord",keyPath:"targetWord",unique:!1}]}}static get currentDate(){let e=new Date;return e.getFullYear()+"/"+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"/"+(e.getDate()<10?"0":"")+e.getDate()+" @ "+(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()+":"+(e.getSeconds()<10?"0":"")+e.getSeconds()}makeIDCompareWithRemote(e){return e.languageCode+"-"+e.targetWord}getCheckArray(e){return e.map(e=>this.makeIDCompareWithRemote(e))}createFromRemoteData(e){let t=this.load(e);return this._loadContext(t,e.context),this._loadHomonym(t,[e]),t}}var P=r(20);class worditem_remotedb_driver_WordItemRemoteDbDriver{constructor(e){this.config=P,this.userId=e||this.config.testUserID;this.requestsParams={baseURL:this.config.baseUrl,headers:{common:{Authorization:"bearer alpheiosMockUserIdlP0DWnmNxe","Content-Type":"application/json"}}},this.storageMap={post:{url:this._constructPostURL.bind(this),serialize:this._serialize.bind(this),checkResult:this._checkPostResult.bind(this)},put:{url:this._constructPostURL.bind(this),serialize:this._serialize.bind(this),checkResult:this._checkPutResult.bind(this)},get:{url:this._constructGetURL.bind(this),checkResult:this._checkGetResult.bind(this)},deleteOne:{url:this._constructPostURL.bind(this),checkResult:this._checkPutResult.bind(this)},deleteMany:{url:this._constructDeleteManyURL.bind(this),checkResult:this._checkPutResult.bind(this)}}}_constructPostURL(e){return`/words/${this._makeStorageID(e)}`}_constructGetURL(e){return e.wordItem?`/words/${this._makeStorageID(e.wordItem)}`:e.languageCode?`/words?languageCode=${e.languageCode}`:void 0}_constructDeleteManyURL(e){return`/words?languageCode=${e.languageCode}`}_makeStorageID(e){return e.languageCode+"-"+e.targetWord}_serialize(e){return{ID:this._makeStorageID(e),listID:this.userId+"-"+e.languageCode,userID:this.userId,languageCode:e.languageCode,targetWord:e.targetWord,important:e.important,createdDT:worditem_remotedb_driver_WordItemRemoteDbDriver.currentDate,homonym:{targetWord:e.homonym.targetWord,lemmasList:e.lemmasList},context:this._serializeContext(e)}}_serializeContext(e){let t=[];for(let r of e.context){let o={target:{source:r.source,selector:{type:"TextQuoteSelector",exact:r.text,prefix:r.prefix.length>0?r.prefix:" ",suffix:r.suffix>0?r.suffix:" ",languageCode:r.languageCode}},languageCode:e.languageCode,targetWord:e.targetWord,createdDT:worditem_remotedb_driver_WordItemRemoteDbDriver.currentDate};t.push(o)}return t}_checkPostResult(e){return 201===e.status}_checkPutResult(e){return 200===e.status}_checkGetResult(e){return 200!==e.status?[]:Array.isArray(e.data)?e.data.map(e=>e.body?e.body:e):e.data}static get currentDate(){let e=new Date;return e.getFullYear()+"/"+(e.getMonth()+1<10?"0":"")+(e.getMonth()+1)+"/"+(e.getDate()<10?"0":"")+e.getDate()+" @ "+(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()+":"+(e.getSeconds()<10?"0":"")+e.getSeconds()}getCheckArray(e){return e.map(e=>this._makeStorageID(e))}}class IndexedDBAdapter{constructor(e){this.available=this._initIndexedDBNamespaces(),this.dbDriver=e,this.errors=[]}async create(e){try{let t,r=this.dbDriver.segments;for(let o of r)if(!(t=await this.update(e,{segment:o})))throw new Error(`Unknown problems with updating segment ${o}`);return t>0}catch(e){return console.error(e),void(e&&this.errors.push(e))}}async deleteMany(e){try{let t={};for(let r of this.dbDriver.segments){let o=this.dbDriver.segmentDeleteManyQuery(r,e),n=await this._deleteFromStore(o);t[r]=n}return t}catch(e){return void(e&&this.errors.push(e))}}async deleteOne(e){try{for(let t of this.dbDriver.segments){let r=this.dbDriver.segmentDeleteQuery(t,e);await this._deleteFromStore(r)}}catch(e){return void(e&&this.errors.push(e))}}async update(e,t){try{let r,o=[t.segment];0===o.length&&(o=this.dbDriver.segments);for(let t of o){let o=this.dbDriver.updateSegmentQuery(t,e);r=!(o.dataItems.length>0)||await this._set(o)}return r}catch(e){return console.error("***************update",e),void(e&&this.errors.push(e))}}async query(e){try{let t=this.dbDriver.listQuery(e),r=await this._getFromStore(t),o=[];if(r.length>0)for(let e of r){let t=this.dbDriver.load(e),r=this.dbDriver.segments;for(let e of r){let r=this.dbDriver.segmentQuery(e,t),o=await this._getFromStore(r);o.length>0&&this.dbDriver.loadSegment(e,t,o)}o.push(t)}return o}catch(e){return e&&this.errors.push(e),[]}}clear(){let e=this.indexedDB.open(this.dbDriver.dbName,this.dbDriver.dbVersion);e.onsuccess=(e=>{try{let t=e.target.result,r=this.dbDriver.objectStores;for(let e of r){let r=t.transaction([e],"readwrite").objectStore(e).clear();r.onsuccess=function(t){console.log(`store ${e} cleared`)},r.onerror=function(e){this.errors.push(e.target)}}}catch(e){this.errors.push(e)}}),e.onerror=(e=>{this.errors.push(e.target)})}_initIndexedDBNamespaces(){return this.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,this.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction||{READ_WRITE:"readwrite"},this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,!!this.indexedDB||(console.warn("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available."),!1)}_openDatabaseRequest(){let e=this.indexedDB.open(this.dbDriver.dbName,this.dbDriver.dbVersion);return e.onupgradeneeded=(e=>{const t=e.target.result,r=e.target.transaction;this._createObjectStores(t,r)}),e}_createObjectStores(e,t){try{this.dbDriver.objectStores.forEach(r=>{const o=this.dbDriver[r];let n;n=e.objectStoreNames.contains(r)?t.objectStore(r):e.createObjectStore(r,{keyPath:o.keyPath}),o.indexes.forEach(e=>{n.indexNames.contains(e.indexName)||n.createIndex(e.indexName,e.keyPath,{unique:e.unique})})})}catch(e){this.errors.push(e)}}async _set(e){let t=this;return await new Promise((r,o)=>{let n=this._openDatabaseRequest();n.onsuccess=(async t=>{const o=t.target.result;let n=await this._putItem(o,e);r(n)}),n.onerror=(e=>{t.errors.push(e.target),o()})})}async _putItem(e,t){let r=this;return await new Promise((o,n)=>{try{const s=e.transaction([t.objectStoreName],"readwrite");s.onerror=(e=>{r.errors.push(e.target),n()});const i=s.objectStore(t.objectStoreName);let a=t.dataItems.length;for(let e of t.dataItems){const t=i.put(e);t.onsuccess=(()=>{0===(a-=1)&&o(!0)}),t.onerror=(()=>{r.errors.push(event.target),n()})}0===a&&o(!0)}catch(e){if(e)return void r.errors.push(e)}})}async _getFromStore(e){let t=this;return await new Promise((r,o)=>{let n=this._openDatabaseRequest();n.onsuccess=(n=>{try{const s=n.target.result.transaction([e.objectStoreName]).objectStore(e.objectStoreName).index(e.condition.indexName),i=this.IDBKeyRange[e.condition.type](e.condition.value),a=s.getAll(i,0);a.onsuccess=(e=>{r(e.target.result)}),a.onerror=(e=>{t.errors.push(e.target),o()})}catch(e){t.errors.push(e),o()}}),n.onerror=(e=>{o(e.target)})})}async _deleteFromStore(e){let t=this;return await new Promise((r,o)=>{let n=this._openDatabaseRequest();n.onsuccess=(n=>{try{const s=n.target.result.transaction([e.objectStoreName],"readwrite").objectStore(e.objectStoreName).index(e.condition.indexName),i=this.IDBKeyRange[e.condition.type](e.condition.value);let a=s.openCursor(i),l=0;a.onsuccess=(e=>{const n=e.target.result;if(n){const e=n.delete();e.onerror=(e=>{t.errors.push(e.target),o()}),e.onsuccess=(e=>{l+=1}),n.continue()}else r(l)})}catch(e){t.errors.push(e),o()}}),n.onerror=(e=>{t.errors.push(e.target),o()})})}}var q=r(2),N=r.n(q);class remote_db_adapter_RemoteDBAdapter{constructor(e){this.dbDriver=e,this.available=this._checkRemoteDBAvailability(),this.errors=[]}_checkRemoteDBAvailability(){return this.dbDriver.userId&&this.dbDriver.requestsParams.headers}async create(e){console.info("*******************RDA remote create start");try{let t=this.dbDriver.storageMap.post.url(e),r=this.dbDriver.storageMap.post.serialize(e);console.info("******************* RDA remote create url, content",t,r);let o=await N.a.post(t,r,this.dbDriver.requestsParams);return this.dbDriver.storageMap.post.checkResult(o)}catch(e){return console.error(e),void(e&&this.errors.push(e))}}async update(e){try{let t=this.dbDriver.storageMap.put.url(e),r=this.dbDriver.storageMap.put.serialize(e),o=await N.a.put(t,r,this.dbDriver.requestsParams);return this.dbDriver.storageMap.put.checkResult(o)}catch(e){return void(e&&this.errors.push(e))}}async deleteOne(e){try{let t=this.dbDriver.storageMap.deleteOne.url(e),r=await N.a.delete(t,this.dbDriver.requestsParams);return this.dbDriver.storageMap.deleteOne.checkResult(r)}catch(e){return void(e&&this.errors.push(e))}}async deleteMany(e){try{let t=this.dbDriver.storageMap.deleteMany.url(e),r=await N.a.delete(t,this.dbDriver.requestsParams);return this.dbDriver.storageMap.deleteMany.checkResult(r)}catch(e){return void(e&&this.errors.push(e))}}async query(e){try{let t=this.dbDriver.storageMap.get.url(e),r=await N.a.get(t,this.dbDriver.requestsParams);return this.dbDriver.storageMap.get.checkResult(r)}catch(e){return console.error(e),void(e&&this.errors.push(e))}}}class user_data_manager_UserDataManager{constructor(e,t){this.userID=e,t&&(t.WORDITEM_UPDATED.sub(this.update.bind(this)),t.WORDITEM_DELETED.sub(this.delete.bind(this)),t.WORDLIST_DELETED.sub(this.deleteMany.bind(this))),this.blocked=!1,this.requestsQueue=[]}_localStorageAdapter(e){let t=new user_data_manager_UserDataManager.LOCAL_DRIVER_CLASSES[e](this.userID);return new IndexedDBAdapter(t)}_remoteStorageAdapter(e){let t=new user_data_manager_UserDataManager.REMOTE_DRIVER_CLASSES[e](this.userID);return new remote_db_adapter_RemoteDBAdapter(t)}defineConstructorName(e){let t,r=e.substr(0,1);if(r==r.toUpperCase())t=e;else{let r=e.split("_").length-1,o=e.replace("_","").toLowerCase().length/2;t=e.substr(-(o+r-2))}return t}async create(e,t){this.blocked&&this.requestsQueue.push({method:"create",data:e});try{this.blocked=!0;let r=this.defineConstructorName(e.dataObj.constructor.name),o=this._localStorageAdapter(r),n=this._remoteStorageAdapter(r),s=!1,i=!1;return console.info("*****************createdLocal 1",o.available,!t.onlyRemote),o.available&&!t.onlyRemote?(s=await o.create(e.dataObj),console.info("*****************createdLocal 2",s),this.printErrors(o)):t.onlyRemote?s=!0:console.error("LocalAdapter is not available for the usage"),n.available&&!t.onlyLocal?i=await n.create(e.dataObj):t.onlyLocal?i=!0:console.error("RemoteAdapter is not available for usage"),this.blocked=!1,this.checkRequestQueue(),s&&i}catch(e){console.error("Some errors happen on creating data in IndexedDB or RemoteDBAdapter",e.message)}}async update(e){this.blocked&&this.requestsQueue.push({method:"update",data:e});try{this.blocked=!0;let t=this.defineConstructorName(e.dataObj.constructor.name),r=this._localStorageAdapter(t),o=this._remoteStorageAdapter(t),n=!1,s=!1;return r.available?(n=await r.update(e.dataObj,e.params),this.printErrors(r)):console.error("LocalAdapter is not available for usage"),o.available?s=await o.update(e.dataObj):console.error("RemoteAdapter is not available for usage"),this.blocked=!1,this.checkRequestQueue(),n&&s}catch(e){console.error("Some errors happen on updating data in IndexedDB",e.message)}}async delete(e){this.blocked&&this.requestsQueue.push({method:"delete",data:e});try{this.blocked=!0;let t=this.defineConstructorName(e.dataObj.constructor.name),r=this._localStorageAdapter(t),o=this._remoteStorageAdapter(t),n=await r.deleteOne(e.dataObj),s=await o.deleteOne(e.dataObj);return this.printErrors(r),this.blocked=!1,this.checkRequestQueue(),n&&s}catch(e){console.error("Some errors happen on deleting data from IndexedDB",e.message)}}async deleteMany(e){this.blocked&&this.requestsQueue.push({method:"deleteMany",data:e});try{this.blocked=!0;let t=this._remoteStorageAdapter(e.dataType),r=this._localStorageAdapter(e.dataType),o=r.deleteMany(e.params),n=t.deleteMany(e.params);const s=[await o,await n];this.printErrors(r),this.blocked=!1,console.info("Result of deleted many from IndexedDB",s),this.checkRequestQueue()}catch(e){console.error("Some errors happen on deleting data from IndexedDB",e.message)}}async query(e,t="merged"){let r=this._remoteStorageAdapter(e.dataType),o=this._localStorageAdapter(e.dataType),n=await r.query(e.params),s=await o.query(e.params);if(this.printErrors(o),"local"===t)return s;if("remote"===t)return n;{let e=await this.mergeLocalRemote(o.dbDriver,r.dbDriver,s,n);return[...s,...e]}}async mergeLocalRemote(e,t,r,o){let n=await this.createAbsentLocalItems(e,t,r,o);return this.createAbsentRemoteItems(e,t,r,o),n}async createAbsentRemoteItems(e,t,r,o){let n=t.getCheckArray(o),s=r.filter(t=>!n.includes(e.makeIDCompareWithRemote(t)));for(let e of s)await this.create({dataObj:e},{onlyRemote:!0});return s}async createAbsentLocalItems(e,t,r,o){let n=e.getCheckArray(r),s=o.filter(e=>!n.includes(t._makeStorageID(e))),i=[];for(let t of s){let r=e.createFromRemoteData(t);await this.create({dataObj:r},{onlyLocal:!0}),i.push(r)}return i}async query_backup(e){let t=this._remoteStorageAdapter(e.dataType),r=this._localStorageAdapter(e.dataType),o=await t.query(e.params),n=await r.query(e.params);this.printErrors(r);let s=[],i=[];return n.forEach(e=>{let t=!1;for(let r=0;r<o.length;r++)if(o[r].isSameItem(e)&&(t=!0,o[r].isNotEqual(e))){let t=o[r].merge(e);o[r]=t,i.push(o[r].merge(e))}t||s.push(e)}),s.forEach(e=>{t.create(e)}),i.forEach(e=>{t.update(e)}),[...o,...s].forEach(e=>{r.create(e)}),n}checkRequestQueue(){if(this.requestsQueue.length>0){let e=this.requestsQueue.shift();this[e.method](e.data)}}printErrors(e){e.errors&&e.errors.length>0&&e.errors.forEach(e=>console.error(`Print error - ${e.message}`))}}user_data_manager_UserDataManager.LOCAL_DRIVER_CLASSES={WordItem:worditem_indexeddb_driver_WordItemIndexedDbDriver},user_data_manager_UserDataManager.REMOTE_DRIVER_CLASSES={WordItem:worditem_remotedb_driver_WordItemRemoteDbDriver};var B=r(17);r.d(t,"Style",function(){return n.a}),r.d(t,"WordlistController",function(){return wordlist_controller_WordlistController}),r.d(t,"WordListPanel",function(){return j}),r.d(t,"UserDataManager",function(){return user_data_manager_UserDataManager}),r.d(t,"EnUs",function(){return B})}])});